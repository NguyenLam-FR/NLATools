var IgxDateRangeInputsBaseComponent_1, IgxDateRangeStartComponent_1, IgxDateRangeEndComponent_1;
import { __decorate } from "tslib";
import { Component, ContentChild, Pipe, Output, EventEmitter, HostListener, Directive } from '@angular/core';
import { formatDate } from '@angular/common';
import { NgControl } from '@angular/forms';
import { IgxInputDirective } from '../input-group/public_api';
import { IgxInputGroupComponent } from '../input-group/input-group.component';
import { IgxInputGroupBase } from '../input-group/input-group.common';
import { IgxDateTimeEditorDirective } from '../directives/date-time-editor/public_api';
/** @hidden @internal */
let DateRangePickerFormatPipe = class DateRangePickerFormatPipe {
    transform(values, inputFormat, locale) {
        if (!values) {
            return '';
        }
        const { start, end } = values;
        // TODO: move default locale from IgxDateTimeEditorDirective to its commons file/use displayFormat
        const startDate = inputFormat ? formatDate(start, inputFormat, locale || 'en') : start === null || start === void 0 ? void 0 : start.toLocaleDateString();
        const endDate = inputFormat ? formatDate(end, inputFormat, locale || 'en') : end === null || end === void 0 ? void 0 : end.toLocaleDateString();
        let formatted;
        if (start) {
            formatted = `${startDate} - `;
            if (end) {
                formatted += endDate;
            }
        }
        // TODO: no need to set format twice
        return formatted ? formatted : '';
    }
};
DateRangePickerFormatPipe = __decorate([
    Pipe({ name: 'dateRange' })
], DateRangePickerFormatPipe);
export { DateRangePickerFormatPipe };
/** @hidden @internal */
let IgxDateRangeInputsBaseComponent = IgxDateRangeInputsBaseComponent_1 = class IgxDateRangeInputsBaseComponent extends IgxInputGroupComponent {
    /** @hidden @internal */
    get nativeElement() {
        return this.element.nativeElement;
    }
    /** @hidden @internal */
    setFocus() {
        this.input.focus();
    }
    /** @hidden @internal */
    updateInputValue(value) {
        if (this.ngControl) {
            this.ngControl.control.setValue(value);
        }
        else {
            this.dateTimeEditor.value = value;
        }
    }
    /** @hidden @internal */
    updateInputValidity(state) {
        this.inputDirective.valid = state;
    }
};
__decorate([
    ContentChild(NgControl)
], IgxDateRangeInputsBaseComponent.prototype, "ngControl", void 0);
__decorate([
    ContentChild(IgxDateTimeEditorDirective)
], IgxDateRangeInputsBaseComponent.prototype, "dateTimeEditor", void 0);
__decorate([
    ContentChild(IgxInputDirective)
], IgxDateRangeInputsBaseComponent.prototype, "inputDirective", void 0);
IgxDateRangeInputsBaseComponent = IgxDateRangeInputsBaseComponent_1 = __decorate([
    Component({
        template: ``,
        selector: `igx-date-range-base`,
        providers: [{ provide: IgxInputGroupBase, useExisting: IgxDateRangeInputsBaseComponent_1 }]
    })
], IgxDateRangeInputsBaseComponent);
export { IgxDateRangeInputsBaseComponent };
/**
 * Templates the default icon in the `IgxDateRangePicker`.
 *
 * @igxModule IgxDateRangePickerModule
 *
 * @igxKeyWords date range icon, date picker icon
 *
 * @igxGroup scheduling
 *
 * @example
 * ```html
 * <igx-date-range-picker>
 *   <igx-picker-toggle igxSuffix>
 *      <igx-icon>calendar_view_day</igx-icon>
 *   </igx-picker-toggle>
 * </igx-date-range-picker>
 * ```
 */
let IgxPickerToggleComponent = class IgxPickerToggleComponent {
    constructor() {
        this.clicked = new EventEmitter();
    }
    onClick(event) {
        // do not focus input on click
        event.stopPropagation();
        this.clicked.emit();
    }
};
__decorate([
    Output()
], IgxPickerToggleComponent.prototype, "clicked", void 0);
__decorate([
    HostListener('click', ['$event'])
], IgxPickerToggleComponent.prototype, "onClick", null);
IgxPickerToggleComponent = __decorate([
    Component({
        template: `<ng-content></ng-content>`,
        selector: 'igx-picker-toggle'
    })
], IgxPickerToggleComponent);
export { IgxPickerToggleComponent };
/**
 * Defines the start input for a date range picker
 *
 * @igxModule IgxDateRangePickerModule
 *
 * @igxTheme igx-input-group-theme, igx-calendar-theme, igx-date-range-picker-theme
 *
 * @igxKeywords date, range, date range, date picker
 *
 * @igxGroup scheduling
 *
 * @remarks
 * When templating, start input has to be templated separately
 *
 * @example
 * ```html
 * <igx-date-range-picker mode="dropdown">
 *      <igx-date-range-start>
 *          <input igxInput igxDateTimeEditor type="text">
 *      </igx-date-range-start>
 *      ...
 * </igx-date-range-picker>
 * ```
 */
let IgxDateRangeStartComponent = IgxDateRangeStartComponent_1 = class IgxDateRangeStartComponent extends IgxDateRangeInputsBaseComponent {
};
IgxDateRangeStartComponent = IgxDateRangeStartComponent_1 = __decorate([
    Component({
        selector: 'igx-date-range-start',
        template: "<div class=\"igx-input-group__wrapper\" *ngIf=\"isTypeBox; else bundle\">\n    <ng-container *ngTemplateOutlet=\"bundle\"></ng-container>\n</div>\n\n<div class=\"igx-input-group__hint\">\n    <ng-content select=\"igx-hint,[igxHint]\"></ng-content>\n</div>\n\n<ng-template #label>\n    <ng-content select=\"[igxLabel]\"></ng-content>\n</ng-template>\n\n<ng-template #input>\n    <ng-content select=\"[igxInput]\"></ng-content>\n</ng-template>\n\n<ng-template #inputBundle>\n    <ng-container *ngIf=\"!isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n</ng-template>\n\n<ng-template #bundle>\n    <ng-container *ngIf=\"isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <div class=\"igx-input-group__bundle\">\n        <ng-content select=\"igx-prefix,[igxPrefix]\"></ng-content>\n\n        <div *ngIf=\"!isTypeBootstrap; else inputBundle\" class=\"igx-input-group__bundle-main\">\n\n            <ng-container *ngIf=\"!isNotMaterial\">\n                <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n            </ng-container>\n\n            <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n        </div>\n\n        <ng-content select=\"igx-suffix,[igxSuffix]\"></ng-content>\n    </div>\n    <div class=\"igx-input-group__border\" *ngIf=\"hasBorder\"></div>\n</ng-template>\n",
        providers: [
            { provide: IgxInputGroupBase, useExisting: IgxDateRangeStartComponent_1 },
            { provide: IgxDateRangeInputsBaseComponent, useExisting: IgxDateRangeStartComponent_1 }
        ]
    })
], IgxDateRangeStartComponent);
export { IgxDateRangeStartComponent };
/**
 * Defines the end input for a date range picker
 *
 * @igxModule IgxDateRangeModule
 *
 * @igxTheme igx-input-group-theme, igx-calendar-theme, igx-date-range-picker-theme
 *
 * @igxKeywords date, range, date range, date picker
 *
 * @igxGroup scheduling
 *
 * @remarks
 * When templating, end input has to be template separately
 *
 * @example
 * ```html
 * <igx-date-range-picker mode="dropdown">
 *      <igx-date-range-end>
 *          <input igxInput igxDateTimeEditor type="text">
 *      </igx-date-range-end>
 *      ...
 * </igx-date-range-picker>
 * ```
 */
let IgxDateRangeEndComponent = IgxDateRangeEndComponent_1 = class IgxDateRangeEndComponent extends IgxDateRangeInputsBaseComponent {
};
IgxDateRangeEndComponent = IgxDateRangeEndComponent_1 = __decorate([
    Component({
        selector: 'igx-date-range-end',
        template: "<div class=\"igx-input-group__wrapper\" *ngIf=\"isTypeBox; else bundle\">\n    <ng-container *ngTemplateOutlet=\"bundle\"></ng-container>\n</div>\n\n<div class=\"igx-input-group__hint\">\n    <ng-content select=\"igx-hint,[igxHint]\"></ng-content>\n</div>\n\n<ng-template #label>\n    <ng-content select=\"[igxLabel]\"></ng-content>\n</ng-template>\n\n<ng-template #input>\n    <ng-content select=\"[igxInput]\"></ng-content>\n</ng-template>\n\n<ng-template #inputBundle>\n    <ng-container *ngIf=\"!isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n</ng-template>\n\n<ng-template #bundle>\n    <ng-container *ngIf=\"isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <div class=\"igx-input-group__bundle\">\n        <ng-content select=\"igx-prefix,[igxPrefix]\"></ng-content>\n\n        <div *ngIf=\"!isTypeBootstrap; else inputBundle\" class=\"igx-input-group__bundle-main\">\n\n            <ng-container *ngIf=\"!isNotMaterial\">\n                <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n            </ng-container>\n\n            <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n        </div>\n\n        <ng-content select=\"igx-suffix,[igxSuffix]\"></ng-content>\n    </div>\n    <div class=\"igx-input-group__border\" *ngIf=\"hasBorder\"></div>\n</ng-template>\n",
        providers: [
            { provide: IgxInputGroupBase, useExisting: IgxDateRangeEndComponent_1 },
            { provide: IgxDateRangeInputsBaseComponent, useExisting: IgxDateRangeEndComponent_1 }
        ]
    })
], IgxDateRangeEndComponent);
export { IgxDateRangeEndComponent };
let IgxDateRangeSeparatorDirective = class IgxDateRangeSeparatorDirective {
};
IgxDateRangeSeparatorDirective = __decorate([
    Directive({
        selector: '[igxDateRangeSeparator]'
    })
], IgxDateRangeSeparatorDirective);
export { IgxDateRangeSeparatorDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1yYW5nZS1waWNrZXItaW5wdXRzLmNvbW1vbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lnbml0ZXVpLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvZGF0ZS1yYW5nZS1waWNrZXIvZGF0ZS1yYW5nZS1waWNrZXItaW5wdXRzLmNvbW1vbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBaUIsTUFBTSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVILE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM3QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUFFLGlCQUFpQixFQUFpQixNQUFNLDJCQUEyQixDQUFDO0FBQzdFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQzlFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBVXZGLHdCQUF3QjtBQUV4QixJQUFhLHlCQUF5QixHQUF0QyxNQUFhLHlCQUF5QjtJQUMzQixTQUFTLENBQUMsTUFBaUIsRUFBRSxXQUFvQixFQUFFLE1BQWU7UUFDckUsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNULE9BQU8sRUFBRSxDQUFDO1NBQ2I7UUFDRCxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQztRQUM5QixrR0FBa0c7UUFDbEcsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssYUFBTCxLQUFLLHVCQUFMLEtBQUssQ0FB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YSwwQkFBMEIsa0NBQXZDLE1BQWEsMEJBQTJCLFNBQVEsK0JBQStCO0NBQUksQ0FBQTtBQUF0RSwwQkFBMEI7SUFSdEMsU0FBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLHNCQUFzQjtRQUNoQyxtOUNBQXdEO1FBQ3hELFNBQVMsRUFBRTtZQUNQLEVBQUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFdBQVcsRUFBRSw0QkFBMEIsRUFBRTtZQUN2RSxFQUFFLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxXQUFXLEVBQUUsNEJBQTBCLEVBQUU7U0FDeEY7S0FDSixDQUFDO0dBQ1csMEJBQTBCLENBQTRDO1NBQXRFLDBCQUEwQjtBQUV2Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F1Qkc7QUFTSCxJQUFhLHdCQUF3QixnQ0FBckMsTUFBYSx3QkFBeUIsU0FBUSwrQkFBK0I7Q0FBSSxDQUFBO0FBQXBFLHdCQUF3QjtJQVJwQyxTQUFTLENBQUM7UUFDUCxRQUFRLEVBQUUsb0JBQW9CO1FBQzlCLG05Q0FBd0Q7UUFDeEQsU0FBUyxFQUFFO1lBQ1AsRUFBRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLDBCQUF3QixFQUFFO1lBQ3JFLEVBQUUsT0FBTyxFQUFFLCtCQUErQixFQUFFLFdBQVcsRUFBRSwwQkFBd0IsRUFBRTtTQUN0RjtLQUNKLENBQUM7R0FDVyx3QkFBd0IsQ0FBNEM7U0FBcEUsd0JBQXdCO0FBS3JDLElBQWEsOEJBQThCLEdBQTNDLE1BQWEsOEJBQThCO0NBQzFDLENBQUE7QUFEWSw4QkFBOEI7SUFIMUMsU0FBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLHlCQUF5QjtLQUN0QyxDQUFDO0dBQ1csOEJBQThCLENBQzFDO1NBRFksOEJBQThCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIFBpcGUsIFBpcGVUcmFuc2Zvcm0sIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBIb3N0TGlzdGVuZXIsIERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ0NvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBJZ3hJbnB1dERpcmVjdGl2ZSwgSWd4SW5wdXRTdGF0ZSB9IGZyb20gJy4uL2lucHV0LWdyb3VwL3B1YmxpY19hcGknO1xuaW1wb3J0IHsgSWd4SW5wdXRHcm91cENvbXBvbmVudCB9IGZyb20gJy4uL2lucHV0LWdyb3VwL2lucHV0LWdyb3VwLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBJZ3hJbnB1dEdyb3VwQmFzZSB9IGZyb20gJy4uL2lucHV0LWdyb3VwL2lucHV0LWdyb3VwLmNvbW1vbic7XG5pbXBvcnQgeyBJZ3hEYXRlVGltZUVkaXRvckRpcmVjdGl2ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvZGF0ZS10aW1lLWVkaXRvci9wdWJsaWNfYXBpJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcmFuZ2UgYmV0d2VlbiB0d28gZGF0ZXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGF0ZVJhbmdlIHtcbiAgICBzdGFydDogRGF0ZTtcbiAgICBlbmQ6IERhdGU7XG59XG5cbi8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuQFBpcGUoeyBuYW1lOiAnZGF0ZVJhbmdlJyB9KVxuZXhwb3J0IGNsYXNzIERhdGVSYW5nZVBpY2tlckZvcm1hdFBpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcbiAgICBwdWJsaWMgdHJhbnNmb3JtKHZhbHVlczogRGF0ZVJhbmdlLCBpbnB1dEZvcm1hdD86IHN0cmluZywgbG9jYWxlPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCF2YWx1ZXMpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHZhbHVlcztcbiAgICAgICAgLy8gVE9ETzogbW92ZSBkZWZhdWx0IGxvY2FsZSBmcm9tIElneERhdGVUaW1lRWRpdG9yRGlyZWN0aXZlIHRvIGl0cyBjb21tb25zIGZpbGUvdXNlIGRpc3BsYXlGb3JtYXRcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gaW5wdXRGb3JtYXQgPyBmb3JtYXREYXRlKHN0YXJ0LCBpbnB1dEZvcm1hdCwgbG9jYWxlIHx8ICdlbicpIDogc3RhcnQ/LnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICBjb25zdCBlbmREYXRlID0gaW5wdXRGb3JtYXQgPyBmb3JtYXREYXRlKGVuZCwgaW5wdXRGb3JtYXQsIGxvY2FsZSB8fCAnZW4nKSA6IGVuZD8udG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgICAgIGxldCBmb3JtYXR0ZWQ7XG4gICAgICAgIGlmIChzdGFydCkge1xuICAgICAgICAgICAgZm9ybWF0dGVkID0gYCR7c3RhcnREYXRlfSAtIGA7XG4gICAgICAgICAgICBpZiAoZW5kKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkICs9IGVuZERhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPOiBubyBuZWVkIHRvIHNldCBmb3JtYXQgdHdpY2VcbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZCA/IGZvcm1hdHRlZCA6ICcnO1xuICAgIH1cbn1cblxuLyoqIEBoaWRkZW4gQGludGVybmFsICovXG5AQ29tcG9uZW50KHtcbiAgICB0ZW1wbGF0ZTogYGAsXG4gICAgc2VsZWN0b3I6IGBpZ3gtZGF0ZS1yYW5nZS1iYXNlYCxcbiAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IElneElucHV0R3JvdXBCYXNlLCB1c2VFeGlzdGluZzogSWd4RGF0ZVJhbmdlSW5wdXRzQmFzZUNvbXBvbmVudCB9XVxufSlcbmV4cG9ydCBjbGFzcyBJZ3hEYXRlUmFuZ2VJbnB1dHNCYXNlQ29tcG9uZW50IGV4dGVuZHMgSWd4SW5wdXRHcm91cENvbXBvbmVudCB7XG4gICAgQENvbnRlbnRDaGlsZChOZ0NvbnRyb2wpXG4gICAgcHJvdGVjdGVkIG5nQ29udHJvbDogTmdDb250cm9sO1xuXG4gICAgQENvbnRlbnRDaGlsZChJZ3hEYXRlVGltZUVkaXRvckRpcmVjdGl2ZSlcbiAgICBwdWJsaWMgZGF0ZVRpbWVFZGl0b3I6IElneERhdGVUaW1lRWRpdG9yRGlyZWN0aXZlO1xuXG4gICAgQENvbnRlbnRDaGlsZChJZ3hJbnB1dERpcmVjdGl2ZSlcbiAgICBwdWJsaWMgaW5wdXREaXJlY3RpdmU6IElneElucHV0RGlyZWN0aXZlO1xuXG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgcHVibGljIGdldCBuYXRpdmVFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgcHVibGljIHNldEZvY3VzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlucHV0LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgcHVibGljIHVwZGF0ZUlucHV0VmFsdWUodmFsdWU6IERhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMubmdDb250cm9sKSB7XG4gICAgICAgICAgICB0aGlzLm5nQ29udHJvbC5jb250cm9sLnNldFZhbHVlKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRpbWVFZGl0b3IudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIHB1YmxpYyB1cGRhdGVJbnB1dFZhbGlkaXR5KHN0YXRlOiBJZ3hJbnB1dFN0YXRlKSB7XG4gICAgICAgIHRoaXMuaW5wdXREaXJlY3RpdmUudmFsaWQgPSBzdGF0ZTtcbiAgICB9XG59XG5cbi8qKlxuICogVGVtcGxhdGVzIHRoZSBkZWZhdWx0IGljb24gaW4gdGhlIGBJZ3hEYXRlUmFuZ2VQaWNrZXJgLlxuICpcbiAqIEBpZ3hNb2R1bGUgSWd4RGF0ZVJhbmdlUGlja2VyTW9kdWxlXG4gKlxuICogQGlneEtleVdvcmRzIGRhdGUgcmFuZ2UgaWNvbiwgZGF0ZSBwaWNrZXIgaWNvblxuICpcbiAqIEBpZ3hHcm91cCBzY2hlZHVsaW5nXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGh0bWxcbiAqIDxpZ3gtZGF0ZS1yYW5nZS1waWNrZXI+XG4gKiAgIDxpZ3gtcGlja2VyLXRvZ2dsZSBpZ3hTdWZmaXg+XG4gKiAgICAgIDxpZ3gtaWNvbj5jYWxlbmRhcl92aWV3X2RheTwvaWd4LWljb24+XG4gKiAgIDwvaWd4LXBpY2tlci10b2dnbGU+XG4gKiA8L2lneC1kYXRlLXJhbmdlLXBpY2tlcj5cbiAqIGBgYFxuICovXG5AQ29tcG9uZW50KHtcbiAgICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxuICAgIHNlbGVjdG9yOiAnaWd4LXBpY2tlci10b2dnbGUnXG59KVxuZXhwb3J0IGNsYXNzIElneFBpY2tlclRvZ2dsZUNvbXBvbmVudCB7XG4gICAgQE91dHB1dCgpXG4gICAgcHVibGljIGNsaWNrZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBASG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pXG4gICAgcHVibGljIG9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgLy8gZG8gbm90IGZvY3VzIGlucHV0IG9uIGNsaWNrXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmNsaWNrZWQuZW1pdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBzdGFydCBpbnB1dCBmb3IgYSBkYXRlIHJhbmdlIHBpY2tlclxuICpcbiAqIEBpZ3hNb2R1bGUgSWd4RGF0ZVJhbmdlUGlja2VyTW9kdWxlXG4gKlxuICogQGlneFRoZW1lIGlneC1pbnB1dC1ncm91cC10aGVtZSwgaWd4LWNhbGVuZGFyLXRoZW1lLCBpZ3gtZGF0ZS1yYW5nZS1waWNrZXItdGhlbWVcbiAqXG4gKiBAaWd4S2V5d29yZHMgZGF0ZSwgcmFuZ2UsIGRhdGUgcmFuZ2UsIGRhdGUgcGlja2VyXG4gKlxuICogQGlneEdyb3VwIHNjaGVkdWxpbmdcbiAqXG4gKiBAcmVtYXJrc1xuICogV2hlbiB0ZW1wbGF0aW5nLCBzdGFydCBpbnB1dCBoYXMgdG8gYmUgdGVtcGxhdGVkIHNlcGFyYXRlbHlcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgaHRtbFxuICogPGlneC1kYXRlLXJhbmdlLXBpY2tlciBtb2RlPVwiZHJvcGRvd25cIj5cbiAqICAgICAgPGlneC1kYXRlLXJhbmdlLXN0YXJ0PlxuICogICAgICAgICAgPGlucHV0IGlneElucHV0IGlneERhdGVUaW1lRWRpdG9yIHR5cGU9XCJ0ZXh0XCI+XG4gKiAgICAgIDwvaWd4LWRhdGUtcmFuZ2Utc3RhcnQ+XG4gKiAgICAgIC4uLlxuICogPC9pZ3gtZGF0ZS1yYW5nZS1waWNrZXI+XG4gKiBgYGBcbiAqL1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdpZ3gtZGF0ZS1yYW5nZS1zdGFydCcsXG4gICAgdGVtcGxhdGVVcmw6ICcuLi9pbnB1dC1ncm91cC9pbnB1dC1ncm91cC5jb21wb25lbnQuaHRtbCcsXG4gICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHsgcHJvdmlkZTogSWd4SW5wdXRHcm91cEJhc2UsIHVzZUV4aXN0aW5nOiBJZ3hEYXRlUmFuZ2VTdGFydENvbXBvbmVudCB9LFxuICAgICAgICB7IHByb3ZpZGU6IElneERhdGVSYW5nZUlucHV0c0Jhc2VDb21wb25lbnQsIHVzZUV4aXN0aW5nOiBJZ3hEYXRlUmFuZ2VTdGFydENvbXBvbmVudCB9XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBJZ3hEYXRlUmFuZ2VTdGFydENvbXBvbmVudCBleHRlbmRzIElneERhdGVSYW5nZUlucHV0c0Jhc2VDb21wb25lbnQgeyB9XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgZW5kIGlucHV0IGZvciBhIGRhdGUgcmFuZ2UgcGlja2VyXG4gKlxuICogQGlneE1vZHVsZSBJZ3hEYXRlUmFuZ2VNb2R1bGVcbiAqXG4gKiBAaWd4VGhlbWUgaWd4LWlucHV0LWdyb3VwLXRoZW1lLCBpZ3gtY2FsZW5kYXItdGhlbWUsIGlneC1kYXRlLXJhbmdlLXBpY2tlci10aGVtZVxuICpcbiAqIEBpZ3hLZXl3b3JkcyBkYXRlLCByYW5nZSwgZGF0ZSByYW5nZSwgZGF0ZSBwaWNrZXJcbiAqXG4gKiBAaWd4R3JvdXAgc2NoZWR1bGluZ1xuICpcbiAqIEByZW1hcmtzXG4gKiBXaGVuIHRlbXBsYXRpbmcsIGVuZCBpbnB1dCBoYXMgdG8gYmUgdGVtcGxhdGUgc2VwYXJhdGVseVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBodG1sXG4gKiA8aWd4LWRhdGUtcmFuZ2UtcGlja2VyIG1vZGU9XCJkcm9wZG93blwiPlxuICogICAgICA8aWd4LWRhdGUtcmFuZ2UtZW5kPlxuICogICAgICAgICAgPGlucHV0IGlneElucHV0IGlneERhdGVUaW1lRWRpdG9yIHR5cGU9XCJ0ZXh0XCI+XG4gKiAgICAgIDwvaWd4LWRhdGUtcmFuZ2UtZW5kPlxuICogICAgICAuLi5cbiAqIDwvaWd4LWRhdGUtcmFuZ2UtcGlja2VyPlxuICogYGBgXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaWd4LWRhdGUtcmFuZ2UtZW5kJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4uL2lucHV0LWdyb3VwL2lucHV0LWdyb3VwLmNvbXBvbmVudC5odG1sJyxcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgeyBwcm92aWRlOiBJZ3hJbnB1dEdyb3VwQmFzZSwgdXNlRXhpc3Rpbmc6IElneERhdGVSYW5nZUVuZENvbXBvbmVudCB9LFxuICAgICAgICB7IHByb3ZpZGU6IElneERhdGVSYW5nZUlucHV0c0Jhc2VDb21wb25lbnQsIHVzZUV4aXN0aW5nOiBJZ3hEYXRlUmFuZ2VFbmRDb21wb25lbnQgfVxuICAgIF1cbn0pXG5leHBvcnQgY2xhc3MgSWd4RGF0ZVJhbmdlRW5kQ29tcG9uZW50IGV4dGVuZHMgSWd4RGF0ZVJhbmdlSW5wdXRzQmFzZUNvbXBvbmVudCB7IH1cblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbaWd4RGF0ZVJhbmdlU2VwYXJhdG9yXSdcbn0pXG5leHBvcnQgY2xhc3MgSWd4RGF0ZVJhbmdlU2VwYXJhdG9yRGlyZWN0aXZlIHtcbn1cbiJdfQ==